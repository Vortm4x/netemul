if ( open ) closeFile();
newFile();
var net = new Array();
var r = new Array();
var s = new Array();
var n = 1;
var g = 30;
var rg = 157;
for ( i = 0 ; i < 2 ; i++ ) {
    net[i] = new Array();
    net[i+2] = new Array();
    s[i] = createSwitch(2 , i*3 +1 , 8);
    s[i+2] = createSwitch(10, i*3+1 , 8);
    r[i] = createRouter(4, i*3 + 1 , 8);
    r[i+2] = createRouter(8, i*3+1 , 8);
    createConnection(r[i] , r[i+2] , "LAN3" , "LAN3");
    createConnection(s[i] , r[i] , "LAN8" , "LAN8" );
    createConnection(s[i+2] , r[i+2] , "LAN8" , "LAN8");
    for ( j = 0 ; j < 3 ; j++ ) {
        net[i][j] = createComputer(0,i*3 + j,1);
        net[i+2][j] = createComputer(12,i*3+j,1);
        createConnection(net[i][j] , s[i] , "eth0" , "LAN"+(j+1) );
        createConnection(net[i+2][j] , s[i+2] , "eth0" , "LAN"+(j+1) );
        setIp( net[i][j] , "eth0" , "192.168.1."+(n+j) );
        setIp( net[i+2][j] , "eth0" , "192.168.1."+(n+64+j) );
        setMask( net[i][j] , "eth0" , "255.255.255.224");
        setMask( net[i+2][j] , "eth0" , "255.255.255.224");
        setGateway( net[i][j], "192.168.1."+ (g+32*i) );
        setGateway( net[i+2][j] ,"192.168.1."+ (g+64+32*i) );
    }
    setIp( r[i] , "LAN3" , "192.168.1."+rg);
    setIp( r[i+2] , "LAN3" , "192.168.1."+(rg+1));
    setMask( r[i] , "LAN3" , "255.255.255.224");
    setMask( r[i+2] , "LAN3" , "255.255.255.224");
    setIp( r[i] , "LAN8" , "192.168.1."+ (g+32*i) );
    setIp( r[i+2] , "LAN8" , "192.168.1."+ (g+64+32*i) );
    setMask( r[i] , "LAN8" , "255.255.255.224");
    setMask( r[i+2] , "LAN8" , "255.255.255.224");
    setMask( r[i] , "LAN4" , "255.255.255.224");
    setMask( r[i+2] , "LAN4" , "255.255.255.224");
    rg += 32;
    n += 32;
}
createConnection( r[0] , r[1] , "LAN4" , "LAN4");
createConnection( r[2] , r[3] , "LAN4" , "LAN4");
setIp(r[0] , "LAN4" ,"192.168.1.221");
setIp(r[1] , "LAN4" , "192.168.1.222");
setIp(r[2] , "LAN4" , "192.168.1.253");
setIp(r[3] , "LAN4" , "192.168.1.254");
true;
